<?xml version="1.1" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog" xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.5.xsd">
    <changeSet author="sberlin" id="1526628951200-1" context="!test">
        <insert tableName="dimension">
            <column name="id" valueNumeric="nextval(&apos;hibernate_sequence&apos;)" />
            <column name="name" value="Architektur" />
        </insert>
    </changeSet>
    <changeSet author="sberlin" id="1526628951200-2" context="!test">
        <insert tableName="team_participations">
            <column name="participations_id" valueComputed="(SELECT id FROM dimension WHERE name = &apos;QS&apos; LIMIT 1)"/>
            <column name="teams_id" valueComputed="(SELECT id FROM team WHERE short_name = &apos;dv&apos; LIMIT 1)"/>
        </insert>
        <insert tableName="team_participations">
            <column name="participations_id" valueComputed="(SELECT id FROM dimension WHERE name = &apos;QS&apos; LIMIT 1)"/>
            <column name="teams_id" valueComputed="(SELECT id FROM team WHERE short_name = &apos;tesla&apos; LIMIT 1)"/>
        </insert>
        <insert tableName="team_participations">
            <column name="participations_id" valueComputed="(SELECT id FROM dimension WHERE name = &apos;Architektur&apos; LIMIT 1)"/>
            <column name="teams_id" valueComputed="(SELECT id FROM team WHERE short_name = &apos;tesla&apos; LIMIT 1)"/>
        </insert>
        <insert tableName="team_participations">
            <column name="participations_id" valueComputed="(SELECT id FROM dimension WHERE name = &apos;QS&apos; LIMIT 1)"/>
            <column name="teams_id" valueComputed="(SELECT id FROM team WHERE short_name = &apos;ft1&apos; LIMIT 1)"/>
        </insert>
        <insert tableName="team_participations">
            <column name="participations_id" valueComputed="(SELECT id FROM dimension WHERE name = &apos;QS&apos; LIMIT 1)"/>
            <column name="teams_id" valueComputed="(SELECT id FROM team WHERE short_name = &apos;ft2&apos; LIMIT 1)"/>
        </insert>
        <insert tableName="team_participations">
            <column name="participations_id" valueComputed="(SELECT id FROM dimension WHERE name = &apos;QS&apos; LIMIT 1)"/>
            <column name="teams_id" valueComputed="(SELECT id FROM team WHERE short_name = &apos;ft3&apos; LIMIT 1)"/>
        </insert>
    </changeSet>
    <changeSet author="sberlin" id="1526628951200-3" context="!test">
        <sql>
            <comment>Team DV has yellow and orange level</comment>
            INSERT INTO team_skill (id, completed_at, verified_at, irrelevant, note, skill_id, team_id)
            SELECT nextval(&apos;hibernate_sequence&apos;), current_timestamp, current_timestamp, FALSE, NULL, level_skill.skill_id, team.id as team_id
            FROM level_skill level_skill
            LEFT JOIN level level ON level_skill.level_id = level.id, team team
            WHERE (level.name = 'yellow'
            OR level.name = 'orange')
            AND team.short_name = 'dv'
        </sql>
        <sql>
            <comment>Team Tesla has yellow, orange, green, blue and brown level</comment>
            INSERT INTO team_skill (id, completed_at, verified_at, irrelevant, note, skill_id, team_id)
            SELECT nextval(&apos;hibernate_sequence&apos;), current_timestamp, current_timestamp, FALSE, NULL, level_skill.skill_id, team.id as team_id
            FROM level_skill level_skill
            LEFT JOIN level level ON level_skill.level_id = level.id, team team
            WHERE (level.name = 'yellow'
            OR level.name = 'orange'
            OR level.name = 'green'
            OR level.name = 'blue'
            OR level.name = 'brown')
            AND team.short_name = 'tesla'
        </sql>
        <sql>
            <comment>Team Tesla has partly achieved the black level</comment>
            INSERT INTO team_skill (id, completed_at, verified_at, irrelevant, note, skill_id, team_id)
            SELECT nextval(&apos;hibernate_sequence&apos;), current_timestamp, current_timestamp, FALSE, NULL, level_skill.skill_id, team.id as team_id
            FROM level_skill level_skill
            LEFT JOIN level level ON level_skill.level_id = level.id, team team
            WHERE level.name = 'black'
            AND team.short_name = 'tesla'
            LIMIT 2
        </sql>
        <sql>
            <comment>Team FT1 has some skills</comment>
            INSERT INTO team_skill (id, completed_at, verified_at, irrelevant, note, skill_id, team_id)
            SELECT nextval(&apos;hibernate_sequence&apos;), current_timestamp, current_timestamp, FALSE, NULL, skill.id as skill_id, team.id as team_id
            FROM skill skill, team team
            WHERE team.short_name = 'ft1'
            AND skill.id IN (SELECT id FROM skill OFFSET random() * (SELECT count(*) FROM skill) LIMIT 10)
        </sql>
        <sql>
            <comment>Team FT2 has some skills</comment>
            INSERT INTO team_skill (id, completed_at, verified_at, irrelevant, note, skill_id, team_id)
            SELECT nextval(&apos;hibernate_sequence&apos;), current_timestamp, current_timestamp, FALSE, NULL, skill.id as skill_id, team.id as team_id
            FROM skill skill, team team
            WHERE team.short_name = 'ft2'
            AND skill.id IN (SELECT id FROM skill OFFSET random() * (SELECT count(*) FROM skill) LIMIT 10)
        </sql>
        <sql>
            <comment>Team FT3 has some skills</comment>
            INSERT INTO team_skill (id, completed_at, verified_at, irrelevant, note, skill_id, team_id)
            SELECT nextval(&apos;hibernate_sequence&apos;), current_timestamp, current_timestamp, FALSE, NULL, skill.id as skill_id, team.id as team_id
            FROM skill skill, team team
            WHERE team.short_name = 'ft3'
            AND skill.id IN (SELECT id FROM skill OFFSET random() * (SELECT count(*) FROM skill) LIMIT 10)
        </sql>
    </changeSet>
    <!--<changeSet author="sberlin" id="1526628951200-4" context="!test">-->
        <!--<update tableName="team">-->
            <!--<column name="picture" valueBlobFile="../blobs/Team-Data.jpg" />-->
            <!--<column name="picture_content_type" value="image/jpeg" />-->
            <!--<where>short_name = &apos;dv&apos;</where>-->
        <!--</update>-->
        <!--<update tableName="team">-->
            <!--<column name="picture" valueBlobFile="../blobs/Team-Tesla.png" />-->
            <!--<column name="picture_content_type" value="image/png" />-->
            <!--<where>short_name = &apos;tesla&apos;</where>-->
        <!--</update>-->
        <!--<update tableName="team">-->
            <!--<column name="picture" valueBlobFile="../blobs/Team-FT1.jpg" />-->
            <!--<column name="picture_content_type" value="image/jpeg" />-->
            <!--<where>short_name = &apos;ft1&apos;</where>-->
        <!--</update>-->
        <!--<update tableName="team">-->
            <!--<column name="picture" valueBlobFile="../blobs/Team-FT2.jpg" />-->
            <!--<column name="picture_content_type" value="image/jpeg" />-->
            <!--<where>short_name = &apos;ft2&apos;</where>-->
        <!--</update>-->
        <!--<update tableName="team">-->
            <!--<column name="picture" valueBlobFile="../blobs/Team-FT3.jpg" />-->
            <!--<column name="picture_content_type" value="image/jpeg" />-->
            <!--<where>short_name = &apos;ft3&apos;</where>-->
        <!--</update>-->
    <!--</changeSet>-->
    <!--<changeSet author="sberlin" id="1526628951200-5" context="!test">-->
        <!--<update tableName="badge">-->
            <!--<column name="picture" valueBlobFile="../blobs/Badge-Ninja-Tanto.png" />-->
            <!--<column name="picture_content_type" value="image/png" />-->
        <!--</update>-->
    <!--</changeSet>-->
    <!--<changeSet author="sberlin" id="1526628951200-6">-->
        <!--<update tableName="level">-->
            <!--<column name="picture" valueBlobFile="../blobs/Belt-yellow.png" />-->
            <!--<column name="picture_content_type" value="image/png" />-->
            <!--<where>name = &apos;yellow&apos;</where>-->
        <!--</update>-->
        <!--<update tableName="level">-->
            <!--<column name="picture" valueBlobFile="../blobs/Belt-orange.png" />-->
            <!--<column name="picture_content_type" value="image/png" />-->
            <!--<where>name = &apos;orange&apos;</where>-->
        <!--</update>-->
        <!--<update tableName="level">-->
            <!--<column name="picture" valueBlobFile="../blobs/Belt-green.png" />-->
            <!--<column name="picture_content_type" value="image/png" />-->
            <!--<where>name = &apos;green&apos;</where>-->
        <!--</update>-->
        <!--<update tableName="level">-->
            <!--<column name="picture" valueBlobFile="../blobs/Belt-blue.png" />-->
            <!--<column name="picture_content_type" value="image/png" />-->
            <!--<where>name = &apos;blue&apos;</where>-->
        <!--</update>-->
        <!--<update tableName="level">-->
            <!--<column name="picture" valueBlobFile="../blobs/Belt-brown.png" />-->
            <!--<column name="picture_content_type" value="image/png" />-->
            <!--<where>name = &apos;brown&apos;</where>-->
        <!--</update>-->
        <!--<update tableName="level">-->
            <!--<column name="picture" valueBlobFile="../blobs/Belt-black.png" />-->
            <!--<column name="picture_content_type" value="image/png" />-->
            <!--<where>name = &apos;black&apos;</where>-->
        <!--</update>-->
    <!--</changeSet>-->
</databaseChangeLog>
